<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>社員基本情報一覧画面</title>
  <link rel="stylesheet" href="bootstrap.min.css">
</head>
<body>

<h1 style="padding-top: 30px;padding-bottom: 15px;">社員基本情報一覧画面</h1>

姓名
<input type="text" id="myInput">
<button onclick="myFunction()">社員検索</button><br><br>

<div class="container">
  <div class="col-md-6 col-md-offset-3">
    <div id="app">
      <!--书籍列表部分-->
      <table class="table table-hover" id="table" border="1">
        <captiopn></captiopn>
        <thead>
        <tr>
          <th>社員番号</th>
          <th>姓名</th>
          <th>生年月日</th>
          <th>国籍</th>
          <th>性別</th>
          <th>操作</th>
        </tr>
        </thead>
        <tbody id="tbody">
        <tr>
          <td>111111</td>
          <td>山田花子</td>
          <td>1991-01-12</td>
          <td>日本</td>
          <td>女性</td>
          <td>
            <button class="btn btn-danger" type="button" class="del" onclick="delRow(this);">削除</button>
            <button class="btn btn-success" type="button" class="edit" onclick="editRow(this)">変更</button>
            <!--            <button class="btn btn-success" type="button" class="add" onclick="addRow(this)">添加</button>-->
          </td>
        </tr>
        <tr>
          <td>222222</td>
          <td>彭于晏</td>
          <td>1991-11-24</td>
          <td>中国</td>
          <td>男性</td>
          <td>
            <button class="btn btn-danger" type="button" class="del" onclick="delRow(this);">削除</button>
            <button class="btn btn-success" type="button" class="edit" onclick="editRow(this)">変更</button>
            <!--            <button class="btn btn-success" type="button" class="add" onclick="addRow(this)">添加</button>-->
          </td>
        </tr>
        <tr>
          <td>333333</td>
          <td>Damon</td>
          <td>1992-05-16</td>
          <td>アメリカ</td>
          <td>不明</td>
          <td>
            <button class="btn btn-danger" type="button" class="del" onclick="delRow(this)">削除</button>
            <button class="btn btn-success" type="button" class="edit" onclick="editRow(this)">変更</button>
            <!--            <button class="btn btn-success" type="button" class="add" onclick="addRow(this)">添加</button>-->
          </td>
        </tr>

        </tbody>
      </table>

      <div id="editBook" style="display:none">
        <!--        <legend>修改书籍</legend>-->
        <table border="1">

          <tr>
            <div class="form-group">
              <td><label for="group1" >社員番号</label></td>
              <td><input type="text" class="form-control" id="id1"></td>
            </div>
          </tr>
          <tr>
            <div class="form-group">
              <td><label for="group1">姓名</label></td>
              <td><input type="text" class="form-control" id="group1"></td>
            </div>
          </tr>
          <tr>
            <div class="form-group">
              <td><label for="author1">生年月日</label></td>
              <td><input type="text" class="form-control" id="author1"></td>
            </div>
          </tr>
          <tr>
            <div class="form-group">
              <td><label for="price1">国籍</label></td>
              <td><input type="text" class="form-control" id="price1"></td>
            </div>
          </tr>
          <tr>
            <div class="form-group">
              <td><label for="price1">性別</label></td>
              <td><input type="text" class="form-control" id="gender1"></td>
            </div>
          </tr>
        </table>
        <button class="btn btn-primary btn-block" onclick="complete()">確認</button>

      </div>
    </div>
  </div>
</div>
<script>
  //获取点击的那一行的行号
  function getRow(r) {
    var i = r.parentNode.parentNode.rowIndex;
    return i;
  }
  //删除某一行
  function delRow(r) {
    document.getElementById('table').deleteRow(getRow(r));
    addNumber();
  }

  //点击修改按钮，弹出修改框
  function editRow(r) {
    editLineNumber = getRow(r);
    document.getElementById('editBook').style = "display: block";
    editReset();
    /*var arr = new Array();
    for(var i=0; i<3; i++) {
        arr[i] = document.getElementById('table').rows[editLineNumber].cells[i+1].innerText;
    }
    document.getElementById('group1').value = arr[0];
    document.getElementById('author1').value = arr[1];
    document.getElementById('price1').value = arr[2];*/
  }
  //将修改后的数据更新到列表里
  function complete() {
    document.getElementById('table').deleteRow(editLineNumber);//删除原来那行
    var arr = new Array();
    arr[0] = document.getElementById('id1').value;
    arr[1] = document.getElementById('group1').value;
    arr[2] = document.getElementById('author1').value;
    arr[3] = document.getElementById('price1').value;
    arr[4] = document.getElementById('gender1').value;
    arr[5] = '<button class="btn btn-danger" type="button" class="del" onclick="delRow(this);">削除</button>\n' +
            '                        <button class="btn btn-success" type="button" class="edit" onclick="editRow(this)">変更</button>\n' //+
    // '                        <button class="btn btn-success" type="button" class="add" onclick="addRow(this)">添加</button>'
    var x = document.getElementById('table').insertRow(editLineNumber);//添加原来那行
    for(var i=0; i<arr.length; i++){
      x.insertCell(i).innerHTML = arr[i];
    }
    addNumber();
    document.getElementById('editBook').style = "display: none";
  }
  //修改框中的值为所选列表中的值
  // function editReset() {
  //   var arr = new Array();
  //   for(var i=0; i<5; i++) {
  //     arr[i] = document.getElementById('table').rows[editLineNumber].cells[i+0].innerText;
  //   }
  //   document.getElementById('id1').value = arr[0];
  //   document.getElementById('group1').value = arr[1];
  //   document.getElementById('author1').value = arr[2];
  //   document.getElementById('price1').value = arr[3];
  //   document.getElementById('gender1').value = arr[4];
  // }
  //取消添加
  // function addCancel() {
  //   document.getElementById('addBook').style = "display: none";
  // }
  // //取消编辑
  // function editCancel() {
  //   document.getElementById('editBook').style = "display: none";
  // }


  function myFunction() {
// 声明变量
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("myInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("tbody");
    tr = table.getElementsByTagName("tr");

    // 循环遍历所有列表项，并隐藏那些与搜索查询不匹配的项
    for (i = 0; i < tr.length; i++) {
      td = tr[i].getElementsByTagName("td")[0];
      if (td) {
        txtValue = td.textContent || td.innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
    }
  }
</script>
</body>
</html>